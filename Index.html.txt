<meta name='viewport' content='width=device-width, initial-scale=1'/><!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù†ÙˆØ± Ø§Ù„Ø´Ø§Ù…Ù„</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri&family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #0b3d2e; --secondary: #1e8449; --accent: #d4ac0d; --bg: #f4f7f6; }
        body { font-family: 'Tajawal', sans-serif; background: var(--bg); margin: 0; }
        
        header { background: var(--primary); color: white; padding: 20px; text-align: center; position: sticky; top: 0; z-index: 100; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        
        nav { display: flex; justify-content: space-around; background: white; border-bottom: 2px solid #ddd; }
        nav button { flex: 1; padding: 15px; border: none; background: none; font-family: 'Tajawal'; font-weight: bold; cursor: pointer; color: #555; }
        nav button.active { color: var(--secondary); border-bottom: 4px solid var(--secondary); }

        .container { max-width: 800px; margin: 20px auto; padding: 10px; }
        .page { display: none; }
        .page.active { display: block; animation: fadeIn 0.4s; }

        .card { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); margin-bottom: 20px; }
        select, input { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #ddd; margin: 10px 0; font-family: 'Tajawal'; font-size: 1rem; box-sizing: border-box; }
        
        .label-group { font-weight: bold; color: var(--primary); margin-top: 10px; display: block; }

        .btn-group { display: flex; gap: 10px; margin-top: 15px; }
        .btn-main { flex: 2; padding: 15px; background: var(--secondary); color: white; border: none; border-radius: 10px; font-size: 1.1rem; cursor: pointer; transition: 0.3s; }
        .btn-download { flex: 1; padding: 15px; background: var(--primary); color: white; border: none; border-radius: 10px; font-size: 1.1rem; cursor: pointer; text-decoration: none; text-align: center; display: flex; align-items: center; justify-content: center; }
        
        .athkar-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .athkar-item { background: white; padding: 15px; border-radius: 12px; border-right: 5px solid var(--secondary); cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }

        #tasbeeh-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(11, 61, 46, 0.98); color: white;
            display: none; flex-direction: column; align-items: center; justify-content: center;
            z-index: 2000; text-align: center;
        }
        .counter-circle {
            width: 220px; height: 220px; border: 10px solid var(--accent);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 5rem; font-weight: bold; margin: 30px 0;
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @media (max-width: 500px) { .athkar-grid { grid-template-columns: 1fr; } .btn-group { flex-direction: column; } }
    </style>
</head>
<body>

<header><h1 style="font-family:'Amiri'; margin:0;">ğŸ•‹ Ù†ÙˆØ± Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†</h1></header>

<nav>
    <button onclick="showPage('quran')" id="btn-quran" class="active">Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</button>
    <button onclick="showPage('athkar')" id="btn-athkar">Ø§Ù„Ø£Ø°ÙƒØ§Ø± ÙˆØ§Ù„Ù…Ø³Ø¨Ø­Ø©</button>
</nav>

<div class="container">
    <div id="quran" class="page active">
        <div class="card">
            <h3>Ø§Ø³ØªÙ…Ø§Ø¹ ÙˆØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙˆØ±</h3>
            
            <span class="label-group">1. Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù‚Ø§Ø±Ø¦:</span>
            <input type="text" id="reciterSearch" placeholder="ğŸ” Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù‚Ø§Ø±Ø¦ Ù‡Ù†Ø§..." oninput="filterReciters()">
            <select id="sheikhSelect" onchange="updateDownloadLink()"></select>
            
            <span class="label-group">2. Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø³ÙˆØ±Ø©:</span>
            <input type="text" id="surahSearch" placeholder="ğŸ” Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø³ÙˆØ±Ø© (Ù…Ø«Ù„: ÙŠØ³)..." oninput="filterSurahs()">
            <select id="surahSelect" onchange="updateDownloadLink()"></select>
            
            <div class="btn-group">
                <button onclick="togglePlay()" id="playBtn" class="btn-main">â–¶ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø©</button>
                <a id="downloadBtn" href="#" download class="btn-download">â¬‡ ØªØ­Ù…ÙŠÙ„ MP3</a>
            </div>
        </div>
    </div>

    <div id="athkar" class="page">
        <div class="athkar-grid" id="athkarContainer"></div>
    </div>
</div>

<div id="tasbeeh-overlay" onclick="doTasbeeh()">
    <button onclick="closeTasbeeh(event)" style="position:absolute; top:30px; left:30px; background:white; color:black; padding:10px 20px; border-radius:10px; border:none; cursor:pointer;">Ø¥ØºÙ„Ø§Ù‚ âœ•</button>
    <div id="tasbeeh-text" style="font-family:'Amiri'; font-size:1.8rem; padding:20px;"></div>
    <div class="counter-circle" id="tasbeeh-count">0</div>
    <p>Ø§Ø¶ØºØ· ÙÙŠ Ø£ÙŠ Ù…ÙƒØ§Ù† Ù„Ù„ØªØ³Ø¨ÙŠØ­</p>
</div>

<script>
    const surahList = ["Ø§Ù„ÙØ§ØªØ­Ø©","Ø§Ù„Ø¨Ù‚Ø±Ø©","Ø¢Ù„ Ø¹Ù…Ø±Ø§Ù†","Ø§Ù„Ù†Ø³Ø§Ø¡","Ø§Ù„Ù…Ø§Ø¦Ø¯Ø©","Ø§Ù„Ø£Ù†Ø¹Ø§Ù…","Ø§Ù„Ø£Ø¹Ø±Ø§Ù","Ø§Ù„Ø£Ù†ÙØ§Ù„","Ø§Ù„ØªÙˆØ¨Ø©","ÙŠÙˆÙ†Ø³","Ù‡ÙˆØ¯","ÙŠÙˆØ³Ù","Ø§Ù„Ø±Ø¹Ø¯","Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…","Ø§Ù„Ø­Ø¬Ø±","Ø§Ù„Ù†Ø­Ù„","Ø§Ù„Ø¥Ø³Ø±Ø§Ø¡","Ø§Ù„ÙƒÙ‡Ù","Ù…Ø±ÙŠÙ…","Ø·Ù‡","Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡","Ø§Ù„Ø­Ø¬","Ø§Ù„Ù…Ø¤Ù…Ù†ÙˆÙ†","Ø§Ù„Ù†ÙˆØ±","Ø§Ù„ÙØ±Ù‚Ø§Ù†","Ø§Ù„Ø´Ø¹Ø±Ø§Ø¡","Ø§Ù„Ù†Ù…Ù„","Ø§Ù„Ù‚ØµØµ","Ø§Ù„Ø¹Ù†ÙƒØ¨ÙˆØª","Ø§Ù„Ø±ÙˆÙ…","Ù„Ù‚Ù…Ø§Ù†","Ø§Ù„Ø³Ø¬Ø¯Ø©","Ø§Ù„Ø£Ø­Ø²Ø§Ø¨","Ø³Ø¨Ø£","ÙØ§Ø·Ø±","ÙŠØ³","Ø§Ù„ØµØ§ÙØ§Øª","Øµ","Ø§Ù„Ø²Ù…Ø±","ØºØ§ÙØ±","ÙØµÙ„Øª","Ø§Ù„Ø´ÙˆØ±Ù‰","Ø§Ù„Ø²Ø®Ø±Ù","Ø§Ù„Ø¯Ø®Ø§Ù†","Ø§Ù„Ø¬Ø§Ø«ÙŠØ©","Ø§Ù„Ø£Ø­Ù‚Ø§Ù","Ù…Ø­Ù…Ø¯","Ø§Ù„ÙØªØ­","Ø§Ù„Ø­Ø¬Ø±Ø§Øª","Ù‚","Ø§Ù„Ø°Ø§Ø±ÙŠØ§Øª","Ø§Ù„Ø·ÙˆØ±","Ø§Ù„Ù†Ø¬Ù…","Ø§Ù„Ù‚Ù…Ø±","Ø§Ù„Ø±Ø­Ù…Ù†","Ø§Ù„ÙˆØ§Ù‚Ø¹Ø©","Ø§Ù„Ø­Ø¯ÙŠØ¯","Ø§Ù„Ù…Ø¬Ø§Ø¯Ù„Ø©","Ø§Ù„Ø­Ø´Ø±","Ø§Ù„Ù…Ù…ØªØ­Ù†Ø©","Ø§Ù„ØµÙ","Ø§Ù„Ø¬Ù…Ø¹Ø©","Ø§Ù„Ù…Ù†Ø§ÙÙ‚ÙˆÙ†","Ø§Ù„ØªØºØ§Ø¨Ù†","Ø§Ù„Ø·Ù„Ø§Ù‚","Ø§Ù„ØªØ­Ø±ÙŠÙ…","Ø§Ù„Ù…Ù„Ùƒ","Ø§Ù„Ù‚Ù„Ù…","Ø§Ù„Ø­Ø§Ù‚Ø©","Ø§Ù„Ù…Ø¹Ø§Ø±Ø¬","Ù†ÙˆØ­","Ø§Ù„Ø¬Ù†","Ø§Ù„Ù…Ø²Ù…Ù„","Ø§Ù„Ù…Ø¯Ø«Ø±","Ø§Ù„Ù‚ÙŠØ§Ù…Ø©","Ø§Ù„Ø¥Ù†Ø³Ø§Ù†","Ø§Ù„Ù…Ø±Ø³Ù„Ø§Øª","Ø§Ù„Ù†Ø¨Ø£","Ø§Ù„Ù†Ø§Ø²Ø¹Ø§Øª","Ø¹Ø¨Ø³","Ø§Ù„ØªÙƒÙˆÙŠØ±","Ø§Ù„Ø§Ù†ÙØ·Ø§Ø±","Ø§Ù„Ù…Ø·ÙÙÙŠÙ†","Ø§Ù„Ø§Ù†Ø´Ù‚Ø§Ù‚","Ø§Ù„Ø¨Ø±ÙˆØ¬","Ø§Ù„Ø·Ø§Ø±Ù‚","Ø§Ù„Ø£Ø¹Ù„Ù‰","Ø§Ù„ØºØ§Ø´ÙŠØ©","Ø§Ù„ÙØ¬Ø±","Ø§Ù„Ø¨Ù„Ø¯","Ø§Ù„Ø´Ù…Ø³","Ø§Ù„Ù„ÙŠÙ„","Ø§Ù„Ø¶Ø­Ù‰","Ø§Ù„Ø´Ø±Ø­","Ø§Ù„ØªÙŠÙ†","Ø§Ù„Ø¹Ù„Ù‚","Ø§Ù„Ù‚Ø¯Ø±","Ø§Ù„Ø¨ÙŠÙ†Ø©","Ø§Ù„Ø²Ù„Ø²Ù„Ø©","Ø§Ù„Ø¹Ø§Ø¯ÙŠØ§Øª","Ø§Ù„Ù‚Ø§Ø±Ø¹Ø©","Ø§Ù„ØªÙƒØ§Ø«Ø±","Ø§Ù„Ø¹ØµØ±","Ø§Ù„Ù‡Ù…Ø²Ø©","Ø§Ù„ÙÙŠÙ„","Ù‚Ø±ÙŠØ´","Ø§Ù„Ù…Ø§Ø¹ÙˆÙ†","Ø§Ù„ÙƒÙˆØ«Ø±","Ø§Ù„ÙƒØ§ÙØ±ÙˆÙ†","Ø§Ù„Ù†ØµØ±","Ø§Ù„Ù…Ø³Ø¯","Ø§Ù„Ø¥Ø®Ù„Ø§Øµ","Ø§Ù„ÙÙ„Ù‚","Ø§Ù„Ù†Ø§Ø³"];
    const athkarDatabase = ["Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡", "Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡", "Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡", "Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±", "Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡", "Ù„Ø§ Ø­ÙˆÙ„ ÙˆÙ„Ø§ Ù‚ÙˆØ© Ø¥Ù„Ø§ Ø¨Ø§Ù„Ù„Ù‡", "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø­Ù…Ø¯Ù‡", "Ø§Ù„Ù„Ù‡Ù… ØµÙ„Ù Ø¹Ù„Ù‰ Ù…Ø­Ù…Ø¯"];
    
    let allReciters = [];
    const audio = new Audio();
    let isPlaying = false;
    let count = 0;

    window.onload = async () => {
        populateSurahs(surahList);
        loadAthkar();
        try {
            const response = await fetch('https://mp3quran.net/api/v3/reciters?language=ar');
            const data = await response.json();
            allReciters = data.reciters;
            populateReciters(allReciters);
        } catch (e) { console.error("Error loading data"); }
    };

    function populateSurahs(list) {
        const sSelect = document.getElementById('surahSelect');
        sSelect.innerHTML = '';
        surahList.forEach((name, index) => {
            if (list.includes(name)) {
                sSelect.add(new Option(`${index+1}. ${name}`, (index+1).toString().padStart(3, '0')));
            }
        });
        updateDownloadLink();
    }

    function filterSurahs() {
        const term = document.getElementById('surahSearch').value.trim();
        const filtered = surahList.filter(name => name.includes(term));
        populateSurahs(filtered);
    }

    function populateReciters(list) {
        const sSelect = document.getElementById('sheikhSelect');
        sSelect.innerHTML = '';
        list.forEach(r => {
            if(r.moshaf && r.moshaf.length > 0) {
                sSelect.add(new Option(r.name, r.moshaf[0].server));
            }
        });
        updateDownloadLink();
    }

    function filterReciters() {
        const term = document.getElementById('reciterSearch').value;
        const filtered = allReciters.filter(r => r.name.includes(term));
        populateReciters(filtered);
    }

    function updateDownloadLink() {
        const server = document.getElementById('sheikhSelect').value;
        const surah = document.getElementById('surahSelect').value;
        if(!server || !surah) return;
        const link = server + surah + ".mp3";
        document.getElementById('downloadBtn').href = link;
        return link;
    }

    function togglePlay() {
        const url = updateDownloadLink();
        if (isPlaying) {
            audio.pause();
            document.getElementById('playBtn').innerText = "â–¶ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø©";
        } else {
            audio.src = url;
            audio.play();
            document.getElementById('playBtn').innerText = "â¸ Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª";
        }
        isPlaying = !isPlaying;
    }

    function loadAthkar() {
        const container = document.getElementById('athkarContainer');
        athkarDatabase.forEach(text => {
            const div = document.createElement('div');
            div.className = 'athkar-item';
            div.onclick = () => openTasbeeh(text);
            div.innerHTML = `<p style="font-family:'Amiri'; font-size:1.2rem; margin:0;">${text}</p><small style="color:var(--secondary)">Ø§Ù†Ù‚Ø± Ù„Ù„ØªØ³Ø¨ÙŠØ­</small>`;
            container.appendChild(div);
        });
    }

    function openTasbeeh(t) {
        count = 0;
        document.getElementById('tasbeeh-text').innerText = t;
        document.getElementById('tasbeeh-count').innerText = count;
        document.getElementById('tasbeeh-overlay').style.display = 'flex';
    }

    function doTasbeeh() {
        count++;
        document.getElementById('tasbeeh-count').innerText = count;
        if(navigator.vibrate) navigator.vibrate(40);
    }

    function closeTasbeeh(e) {
        e.stopPropagation();
        document.getElementById('tasbeeh-overlay').style.display = 'none';
    }

    function showPage(p) {
        document.querySelectorAll('.page').forEach(pg => pg.classList.remove('active'));
        document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
        document.getElementById(p).classList.add('active');
        document.getElementById('btn-'+p).classList.add('active');
    }
</script>
</body>
</html>
